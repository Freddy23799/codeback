!spring.application.name=code
# spring.datasource.url=jdbc:postgresql://localhost:5432/code
# spring.datasource.username=migrateur
# spring.datasource.password=99639881
# server.port=9001
# spring.jpa.hibernate.ddl-auto=update
# spring.jpa.show-sql=true
# spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
# spring.jpa.properties.hibernate.format_sql=true
# logging.level.org.hibernate.SQL=DEBUG
# logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
# server.address=0.0.0.0
# spring.jpa.properties.hibernate.default_batch_fetch_size=50
# spring.jpa.properties.hibernate.jdbc.batch_size=50
# spring.jpa.properties.hibernate.order_inserts=true
# spring.jpa.properties.hibernate.order_updates=true
# spring.datasource.hikari.maximum-pool-size=20
# GUIDE DE DISTRIBUTION DES CLE ET SECRET CODE SENSIBLE POUR PRODUCTION
# export FIREBASE_KEY_PATH="/etc/myapp/firebase/serviceAccountKey.json"
# export PRIVATE_KEY_PATH="/etc/myapp/keys/private_key.pem"
# export PUBLIC_KEY_PATH="/etc/myapp/keys/public_key.pem"   # si tu veux utiliser fichier externe
# export JWT_SECRET="$(openssl rand -base64 64)"
   








spring.application.name=code
server.port=8080
server.address=0.0.0.0

# Datasource
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# Hikari
spring.datasource.hikari.maximum-pool-size=50
spring.datasource.hikari.minimum-idle=5

# JPA
# spring.jpa.hibernate.ddl-auto=update    activer optionnellement mais pas tres conseiller en production
spring.jpa.show-sql=false

# Redis
spring.data.redis.host=${SPRING_REDIS_HOST:redis}
spring.data.redis.port=${SPRING_REDIS_PORT:6379}
spring.cache.type=redis

# Storage / MinIO (utilise l'endpoint interne par défaut)
minio.url=${MINIO_URL:http://minio:9000}
minio.access-key=${MINIO_ACCESS_KEY}
minio.secret-key=${MINIO_SECRET_KEY}
minio.bucket=${MINIO_BUCKET:exams}
app.storage.mode=minio
app.storage.path=uploads/exams

# Upload limits
app.upload.max-bytes=524288000
spring.servlet.multipart.max-file-size=500MB
spring.servlet.multipart.max-request-size=500MB

# Firebase & keys (chemins montés dans /secrets)
firebase.key.path=${FIREBASE_CREDENTIALS_PATH:/secrets/firebase_credentials.json}
rsa.private.path=${JWT_PRIVATE_KEY_PATH:/secrets/private_key.pem}
rsa.public.path=${PUBLIC_KEY_PATH:/secrets/public_key.pem}

# JWT
jwt.secret=${JWT_SECRET:APPLICATION_For_Managment_student_for_2025_quasar_postgres_springBoot_minio_redis_SecretKey_ChangeInProd_32+chars}
jwt.expiration=${JWT_EXPIRATION_MS:36000000}



      
#     creer un repertoire ou garder les fichier et cle sensible du projet       
          
#           sudo mkdir -p /srv/myapp/secrets
# sudo chown $USER:$USER /srv/myapp/secrets
# # copie tes fichiers (exemple)
# scp firebase_credentials.json user@vps:/srv/myapp/secrets/firebase_credentials.json
# scp private_key.pem user@vps:/srv/myapp/secrets/private_key.pem
# scp public_key.pem user@vps:/srv/myapp/secrets/public_key.pem
# # sécurise le dossier
# chmod 750 /srv/myapp/secrets
# chmod 640 /srv/myapp/secrets/*
          
          
          